<!DOCTYPE html>
<html xmlns:sec="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=hmecoefot7"></script>

<!--<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>-->
<!--<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB1WMXgldjOBUmTLlHX3PHI2xTeFyEABLM" defer></script>-->

<style>
    #gmp-map {
        height: 100%;
    }
</style>

<!--<script>-->
<!--    "use strict";-->

<!--    function initMap() {-->
<!--        const myLatLng = {-->
<!--            lat: 40.12150192260742,-->
<!--            lng: -100.45039367675781-->
<!--        };-->
<!--        const map = new google.maps.Map(document.getElementById("gmp-map"), {-->
<!--            zoom: 4,-->
<!--            center: myLatLng,-->
<!--            fullscreenControl: false,-->
<!--            zoomControl: true,-->
<!--            streetViewControl: false-->
<!--        });-->
<!--        new google.maps.Marker({-->
<!--            position: myLatLng,-->
<!--            map,-->
<!--            title: "My location"-->
<!--        });-->
<!--    }-->
<!--</script>-->

<body>
<th:block th:replace="~{/layout/basic :: setContent(~{this :: content} )}">
    <th:block th:fragment="content">

        <div class="container">

            <h1>For Member...............</h1>

            <div sec:authorize="hasRole('USER')">Has USER ROLE</div>
            <div sec:authorize="hasRole('MANAGER')">Has MANAGER ROLE</div>
            <div sec:authorize="hasRole('ADMIN')">Has ADMIN ROLE</div>
            <h5>--------------------------------------------------------</h5>
            <div sec:authorize="isAuthenticated()">
                Only Authenticated user can see this Text
            </div>
            <h5>--------------------------------------------------------</h5>
            Authenticated username:
            <div sec:authentication="name"></div>
            Authenticated user roles:
            <div sec:authentication="principal.authorities"></div>

            <div>
                <div id="map" style="width:100%;height:400px;">
            </div>
        </div>

<!--        <div id="gmp-map"></div>-->




<script>
    var mapOptions = {
        center: new naver.maps.LatLng(37.3595704, 127.105399),
        zoom: 10,
        zoomControl: true
    }

    var map = new naver.maps.Map('map', mapOptions);

    // var map = new naver.maps.Map('map', {
    //     center: position,
    //     zoom: 15
    // });

    var position = new naver.maps.LatLng(37.3595704, 127.105399);


    var marker = new naver.maps.Marker({
        position: position,
        map: map
    });

    naver.maps.Event.addListener(map, 'click', function(e) {
        marker.setPosition(e.coord);
    });

    // 내 위치 옵션 추가
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            var myLocation = new naver.maps.LatLng(position.coords.latitude, position.coords.longitude);
            map.setCenter(myLocation); // 내 위치로 지도 중심 이동
            var marker = new naver.maps.Marker({
                position: myLocation,
                map: map
            });
        });
    }

    // 특정 장소 검색하기
    var searchQuery = "카페"; // 검색어 설정
    var geocoder = new naver.maps.Service.Geocoder({
        clientId: hmecoefot7,
        clientSecret: VBa9hWeMuQqnRZtD6zw3qM1DVOhIZax8vXzZf6U
    });

    geocoder.addressSearch(searchQuery, function(status, response) {
        if (status === naver.maps.Service.Status.OK) {
            var location = new naver.maps.LatLng(response.v2.meta.totalCount > 0 ? response.v2.addresses[0].y : 37.5665, response.v2.meta.totalCount > 0 ? response.v2.addresses[0].x : 126.9780);
            map.setCenter(location);

            // 주변에 마커 추가하기
            var marker = new naver.maps.Marker({
                position: location,
                map: map
            });
        }
    });


<!--</script>-->



    </th:block>
</th:block>
</body>
</html>